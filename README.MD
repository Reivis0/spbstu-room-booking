# üèõÔ∏è –°–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–π –°–ü–±–ü–£
## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–µ–±–Ω—ã–º–∏ –ø–æ–º–µ—â–µ–Ω–∏—è–º–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞–º –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –∏–∑–±–µ–≥–∞—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: —Å—Ç—É–¥–µ–Ω—Ç—ã, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- üìÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- üè¢ **–ö–∞—Ç–∞–ª–æ–≥ –∞—É–¥–∏—Ç–æ—Ä–∏–π**: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–∞–Ω–∏—è—Ö, –∞—É–¥–∏—Ç–æ—Ä–∏—è—Ö –∏ –∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö
- ‚ö° **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- üìä **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º**: –∏–º–ø–æ—Ä—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π
- üíæ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ Redis

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å—Ç–µ–∫–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Application   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ‚îÇ         ‚îÇ          ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê
‚îÇ NATS  ‚îÇ ‚îÇRedis‚îÇ  ‚îÇPostgres‚îÇ ‚îÇNginx ‚îÇ
‚îÇStream ‚îÇ ‚îÇ 7.x ‚îÇ  ‚îÇ  16.x  ‚îÇ ‚îÇ(soon)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **PostgreSQL 16** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GIST –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- **Redis 7** ‚Äî in-memory –∫—ç—à –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **NATS 2.11 + JetStream** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **Docker & Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **Makefile** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

- [Docker](https://docs.docker.com/get-docker/) (–≤–µ—Ä—Å–∏—è 20.10+)
- [Docker Compose](https://docs.docker.com/compose/install/) (–≤–µ—Ä—Å–∏—è 2.0+)
- [Make](https://www.gnu.org/software/make/) (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**

```bash
git clone https://github.com/Reivis0/spbstu-room-booking.git
cd spbstu-room-booking
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

```bash
cd infrastructure
cp .env.local .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è.

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É**

–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Make:
```bash
cd infrastructure
make build
make up
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Docker Compose:
```bash
cd infrastructure
docker-compose build
docker-compose up -d
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤**

```bash
make ps
# –∏–ª–∏
docker-compose ps
```

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å `Up` –∏ `healthy`.

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø–æ—Ä—Ç–∞–º:

| –°–µ—Ä–≤–∏—Å     | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|------------|------|-----------------------------------|
| PostgreSQL | 5432 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö                       |
| Redis      | 6379 | –ö—ç—à                               |
| NATS       | 4222 | Client connections                |
| NATS HTTP  | 8222 | Monitoring –∏ healthcheck          |
| NATS       | 6222 | Cluster connections               |

## üìä –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

#### Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –†–æ–ª–∏: `student`, `teacher`, `admin`
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ü—Ä–æ—Ñ–∏–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

#### Buildings (–ó–¥–∞–Ω–∏—è)
- –ö–æ–¥ –∑–¥–∞–Ω–∏—è
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –∞–¥—Ä–µ—Å
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∞—É–¥–∏—Ç–æ—Ä–∏—è–º

#### Rooms (–ê—É–¥–∏—Ç–æ—Ä–∏–∏)
- –ù–æ–º–µ—Ä –∏ –∫–æ–¥ –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (JSONB)

#### Bookings (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- –°—Ç–∞—Ç—É—Å—ã: `pending`, `confirmed`, `cancelled`, `rejected`
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏

#### Schedule Import (–ò–º–ø–æ—Ä—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∞

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GIST-–∏–Ω–¥–µ–∫—Å—ã PostgreSQL –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π:

```sql
EXCLUDE USING GIST (
    room_id WITH =,
    tstzrange(starts_at, ends_at) WITH &&
)
```

## üîÑ Event-Driven Architecture

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç NATS JetStream –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π:

### Streams

| Stream             | Subjects                              | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                           |
|--------------------|---------------------------------------|--------------------------------------|
| booking_events     | booking.{created,updated,cancelled}   | –°–æ–±—ã—Ç–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π                 |
| schedule_events    | scheduling.imported                   | –°–æ–±—ã—Ç–∏—è –∏–º–ø–æ—Ä—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è           |
| cache_invalidate   | cache.invalidate.room                 | –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞                     |
| notifications      | notification.trigger                  | –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π    |

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Storage**: file (persistent) –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, memory –¥–ª—è –∫—ç—à–∞
- **Retention**: –æ—Ç 10 –º–∏–Ω—É—Ç –¥–æ 24 —á–∞—Å–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
- **Max messages**: 1000-5000 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ stream

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã Make

```bash
# –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make build

# –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
make up

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make down

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
make ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs
```

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL:
```bash
docker exec -it booking-postgres psql -U booking_user -d booking_service
```

### –†–∞–±–æ—Ç–∞ —Å Redis

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis CLI:
```bash
docker exec -it booking-redis redis-cli -a secure_password
```

### –†–∞–±–æ—Ç–∞ —Å NATS

–ü—Ä–æ—Å–º–æ—Ç—Ä streams:
```bash
docker exec -it booking-nats nats stream list
```

–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ stream:
```bash
docker exec -it booking-nats nats stream info booking_events
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ healthchecks

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ healthcheck'–∏:

- **PostgreSQL**: `pg_isready` –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **Redis**: `redis-cli ping` –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **NATS**: HTTP healthcheck –Ω–∞ `/healthz` –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ NATS:
```bash
curl http://localhost:8222/healthz
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` —Ñ–∞–π–ª–µ:

```env
# PostgreSQL
POSTGRES_DB=booking_service
POSTGRES_USER=booking_user
POSTGRES_PASSWORD=your_secure_password
POSTGRES_PORT=5432

# Redis
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_password

# NATS
NATS_CLIENT_PORT=4222
NATS_HTTP_PORT=8222
NATS_CLUSTER_PORT=6222

# Application
APP_PORT=8080
APP_ENV=production
```

### –†–µ—Å—É—Ä—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤:

| –°–µ—Ä–≤–∏—Å     | CPU Limit | Memory Limit | CPU Reserve | Memory Reserve |
|------------|-----------|--------------|-------------|----------------|
| PostgreSQL | 2 CPU     | 2GB          | 0.5 CPU     | 512MB          |
| Redis      | 1 CPU     | 512MB        | 0.25 CPU    | 256MB          |
| NATS       | 1 CPU     | 1GB          | 0.25 CPU    | 256MB          |

## üìù –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ `docker-entrypoint-initdb.d`.

–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π: `infrastructure/postgreSQL/migrations/`

- `1_init.up.sql` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î
- `1_init.down.sql` ‚Äî –æ—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- `1_filling.sql` ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

–í—Å–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
docker-compose logs -f
```

–õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
```bash
docker-compose logs -f postgres
docker-compose logs -f redis
docker-compose logs -f nats
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

```bash
docker-compose restart postgres
```

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ò–∑–º–µ–Ω–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ `.env` –ø–µ—Ä–µ–¥ production –¥–µ–ø–ª–æ–µ–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è PostgreSQL –∏ Redis
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ firewall
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ Docker –æ–±—Ä–∞–∑—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è security –ø–∞—Ç—á–µ–π
